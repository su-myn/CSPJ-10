{% extends "base.html" %}

{% block title %}User Data - {{ user.username }} - Admin Panel{% endblock %}

{% block extra_css %}
<style>
    .category-card {
        border: none;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .category-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }
    
    .category-card-body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        min-height: 120px;
    }
    
    .category-card-body.color-0 {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .category-card-body.color-1 {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .category-card-body.color-2 {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .category-card-body.color-3 {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .category-card-body.color-4 {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    
    .category-card-body.color-5 {
        background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }
    
    .category-card-body.color-6 {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }
    
    .category-card-body.color-7 {
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
    }
    
    .category-card-body.color-8 {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    }
    
    .category-card-body.color-9 {
        background: linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%);
    }
    
    .category-card-body a {
        color: white !important;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .category-card-body a:hover {
        color: #f0f0f0 !important;
        text-decoration: underline !important;
    }
    
    .admin-badge {
        background: #6c757d;
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1><i class="bi bi-person"></i> User Data: {{ user.username }}</h1>
        <p class="text-muted">ID: {{ user.id }}</p>
    </div>
    <div>
        <div class="btn-group me-2" role="group">
            <a href="/admin/user/{{ user.id }}/backup" class="btn btn-success">
                <i class="bi bi-download"></i> JSON
            </a>
            <a href="/admin/user/{{ user.id }}/backup/csv" class="btn btn-info">
                <i class="bi bi-file-earmark-spreadsheet"></i> CSV
            </a>
        </div>
        <a href="/admin/users" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to Users
        </a>
        <a href="/admin" class="btn btn-outline-primary">
            <i class="bi bi-shield-check"></i> Admin Panel
        </a>
    </div>
</div>

<!-- Unassigned Categories -->
{% if unassigned_categories %}
<div class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold" style="font-size: 2rem;">
            <span class="admin-badge">ADMIN VIEW</span> My Categories
        </h2>
    </div>
    
    <div class="row">
        {% for category in unassigned_categories %}
        <div class="col-md-4 mb-3">
            <div class="card h-100 category-card">
                <div class="card-body d-flex align-items-center justify-content-center category-card-body color-{{ loop.index0 % 10 }}">
                    <h3 class="card-title mb-0 text-center" style="font-size: 1.5rem; font-weight: 600;">
                        <a href="/admin/user/{{ user.id }}/category/{{ category.id }}" class="text-decoration-none">{{ category.name }}</a>
                    </h3>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Sections with Categories -->
{% if sections_with_categories %}
{% for section_item in sections_with_categories %}
<div class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold" style="font-size: 2rem;">
            <span class="admin-badge">ADMIN VIEW</span> {{ section_item.section.name }}
        </h2>
    </div>
    
    {% if section_item.categories %}
    <div class="row">
        {% for category in section_item.categories %}
        <div class="col-md-4 mb-3">
            <div class="card h-100 category-card">
                <div class="card-body d-flex align-items-center justify-content-center category-card-body color-{{ loop.index0 % 10 }}">
                    <h3 class="card-title mb-0 text-center" style="font-size: 1.5rem; font-weight: 600;">
                        <a href="/admin/user/{{ user.id }}/category/{{ category.id }}" class="text-decoration-none">{{ category.name }}</a>
                    </h3>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info">
        <p class="mb-0">No categories in this section.</p>
    </div>
    {% endif %}
</div>
{% endfor %}
{% endif %}

<!-- Empty state -->
{% if not unassigned_categories and not sections_with_categories %}
<div class="alert alert-info">
    <h4>No data yet!</h4>
    <p>This user hasn't created any sections or categories yet.</p>
</div>
{% endif %}

{% endblock %}

